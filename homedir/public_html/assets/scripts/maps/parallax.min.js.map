{"version":3,"sources":["parallax.js"],"names":["window","document","undefined","Parallax","element","options","this","layers","getElementsByClassName","data","calibrateX","calibrateY","invertX","invertY","limitX","limitY","scalarX","scalarY","frictionX","frictionY","originX","originY","key","extend","DEFAULTS","calibrationTimer","calibrationFlag","enabled","depths","raf","bounds","ex","ey","ew","eh","ecx","ecy","erx","ery","cx","cy","ix","iy","mx","my","vx","vy","onMouseMove","bind","onDeviceOrientation","onOrientationTimer","onCalibrationTimer","onAnimationFrame","onWindowResize","initialise","NAME","MAGIC_NUMBER","relativeInput","clipRelativeInput","calibrationThreshold","calibrationDelay","supportDelay","prototype","arguments","length","master","i","l","object","name","deserialize","getAttribute","value","isNaN","parseFloat","isFinite","camelCase","replace","match","character","toUpperCase","transformSupport","createElement","propertySupport","propertyValue","featureSupport","cssProperty","jsProperty","vendors","style","body","documentElement","documentOverflow","overflow","appendChild","background","getComputedStyle","getPropertyValue","removeChild","ww","wh","wcx","wcy","wrx","wry","portrait","desktop","navigator","userAgent","motionSupport","DeviceMotionEvent","orientationSupport","DeviceOrientationEvent","orientationStatus","propertyCache","transform2DSupport","transform3DSupport","accelerate","position","updateLayers","updateDimensions","enable","queueCalibration","layer","display","left","top","push","innerWidth","innerHeight","Math","max","updateBounds","getBoundingClientRect","width","height","delay","clearTimeout","setTimeout","addEventListener","requestAnimationFrame","disable","removeEventListener","cancelAnimationFrame","calibrate","x","y","invert","friction","scalar","limit","origin","clamp","min","css","property","setPosition","dx","dy","abs","depth","xOffset","yOffset","event","beta","gamma","clientX","clientY"],"mappings":"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","file":"parallax.min.js","sourcesContent":["/**\n * Parallax.js\n * @author Matthew Wagerfield - @wagerfield\n * @description Creates a parallax effect between an array of layers,\n *              driving the motion from the gyroscope output of a smartdevice.\n *              If no gyroscope is available, the cursor position is used.\n */\n;(function(window, document, undefined) {\n\n  // Strict Mode\n  'use strict';\n\n  // Constants\n  var NAME = 'Parallax';\n  var MAGIC_NUMBER = 30;\n  var DEFAULTS = {\n    relativeInput: false,\n    clipRelativeInput: false,\n    calibrationThreshold: 100,\n    calibrationDelay: 500,\n    supportDelay: 500,\n    calibrateX: false,\n    calibrateY: true,\n    invertX: true,\n    invertY: true,\n    limitX: false,\n    limitY: false,\n    scalarX: 10.0,\n    scalarY: 10.0,\n    frictionX: 0.1,\n    frictionY: 0.1,\n    originX: 0.5,\n    originY: 0.5\n  };\n\n  function Parallax(element, options) {\n\n    // DOM Context\n    this.element = element;\n    this.layers = element.getElementsByClassName('layer');\n\n    // Data Extraction\n    var data = {\n      calibrateX: this.data(this.element, 'calibrate-x'),\n      calibrateY: this.data(this.element, 'calibrate-y'),\n      invertX: this.data(this.element, 'invert-x'),\n      invertY: this.data(this.element, 'invert-y'),\n      limitX: this.data(this.element, 'limit-x'),\n      limitY: this.data(this.element, 'limit-y'),\n      scalarX: this.data(this.element, 'scalar-x'),\n      scalarY: this.data(this.element, 'scalar-y'),\n      frictionX: this.data(this.element, 'friction-x'),\n      frictionY: this.data(this.element, 'friction-y'),\n      originX: this.data(this.element, 'origin-x'),\n      originY: this.data(this.element, 'origin-y')\n    };\n\n    // Delete Null Data Values\n    for (var key in data) {\n      if (data[key] === null) delete data[key];\n    }\n\n    // Compose Settings Object\n    this.extend(this, DEFAULTS, options, data);\n\n    // States\n    this.calibrationTimer = null;\n    this.calibrationFlag = true;\n    this.enabled = false;\n    this.depths = [];\n    this.raf = null;\n\n    // Element Bounds\n    this.bounds = null;\n    this.ex = 0;\n    this.ey = 0;\n    this.ew = 0;\n    this.eh = 0;\n\n    // Element Center\n    this.ecx = 0;\n    this.ecy = 0;\n\n    // Element Range\n    this.erx = 0;\n    this.ery = 0;\n\n    // Calibration\n    this.cx = 0;\n    this.cy = 0;\n\n    // Input\n    this.ix = 0;\n    this.iy = 0;\n\n    // Motion\n    this.mx = 0;\n    this.my = 0;\n\n    // Velocity\n    this.vx = 0;\n    this.vy = 0;\n\n    // Callbacks\n    this.onMouseMove = this.onMouseMove.bind(this);\n    this.onDeviceOrientation = this.onDeviceOrientation.bind(this);\n    this.onOrientationTimer = this.onOrientationTimer.bind(this);\n    this.onCalibrationTimer = this.onCalibrationTimer.bind(this);\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\n    this.onWindowResize = this.onWindowResize.bind(this);\n\n    // Initialise\n    this.initialise();\n  }\n\n  Parallax.prototype.extend = function() {\n    if (arguments.length > 1) {\n      var master = arguments[0];\n      for (var i = 1, l = arguments.length; i < l; i++) {\n        var object = arguments[i];\n        for (var key in object) {\n          master[key] = object[key];\n        }\n      }\n    }\n  };\n\n  Parallax.prototype.data = function(element, name) {\n    return this.deserialize(element.getAttribute('data-'+name));\n  };\n\n  Parallax.prototype.deserialize = function(value) {\n    if (value === 'true') {\n      return true;\n    } else if (value === 'false') {\n      return false;\n    } else if (value === 'null') {\n      return null;\n    } else if (!isNaN(parseFloat(value)) && isFinite(value)) {\n      return parseFloat(value);\n    } else {\n      return value;\n    }\n  };\n\n  Parallax.prototype.camelCase = function(value) {\n    return value.replace(/-+(.)?/g, function(match, character){\n      return character ? character.toUpperCase() : '';\n    });\n  };\n\n  Parallax.prototype.transformSupport = function(value) {\n    var element = document.createElement('div');\n    var propertySupport = false;\n    var propertyValue = null;\n    var featureSupport = false;\n    var cssProperty = null;\n    var jsProperty = null;\n    for (var i = 0, l = this.vendors.length; i < l; i++) {\n      if (this.vendors[i] !== null) {\n        cssProperty = this.vendors[i][0] + 'transform';\n        jsProperty = this.vendors[i][1] + 'Transform';\n      } else {\n        cssProperty = 'transform';\n        jsProperty = 'transform';\n      }\n      if (element.style[jsProperty] !== undefined) {\n        propertySupport = true;\n        break;\n      }\n    }\n    switch(value) {\n      case '2D':\n        featureSupport = propertySupport;\n        break;\n      case '3D':\n        if (propertySupport) {\n          var body = document.body || document.createElement('body');\n          var documentElement = document.documentElement;\n          var documentOverflow = documentElement.style.overflow;\n          if (!document.body) {\n            documentElement.style.overflow = 'hidden';\n            documentElement.appendChild(body);\n            body.style.overflow = 'hidden';\n            body.style.background = '';\n          }\n          body.appendChild(element);\n          element.style[jsProperty] = 'translate3d(1px,1px,1px)';\n          propertyValue = window.getComputedStyle(element).getPropertyValue(cssProperty);\n          featureSupport = propertyValue !== undefined && propertyValue.length > 0 && propertyValue !== 'none';\n          documentElement.style.overflow = documentOverflow;\n          body.removeChild(element);\n        }\n        break;\n    }\n    return featureSupport;\n  };\n\n  Parallax.prototype.ww = null;\n  Parallax.prototype.wh = null;\n  Parallax.prototype.wcx = null;\n  Parallax.prototype.wcy = null;\n  Parallax.prototype.wrx = null;\n  Parallax.prototype.wry = null;\n  Parallax.prototype.portrait = null;\n  Parallax.prototype.desktop = !navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|BB10|mobi|tablet|opera mini|nexus 7)/i);\n  Parallax.prototype.vendors = [null,['-webkit-','webkit'],['-moz-','Moz'],['-o-','O'],['-ms-','ms']];\n  Parallax.prototype.motionSupport = !!window.DeviceMotionEvent;\n  Parallax.prototype.orientationSupport = !!window.DeviceOrientationEvent;\n  Parallax.prototype.orientationStatus = 0;\n  Parallax.prototype.propertyCache = {};\n\n  Parallax.prototype.initialise = function() {\n\n    if (Parallax.prototype.transform2DSupport === undefined) {\n      Parallax.prototype.transform2DSupport = Parallax.prototype.transformSupport('2D');\n      Parallax.prototype.transform3DSupport = Parallax.prototype.transformSupport('3D');\n    }\n\n    // Configure Context Styles\n    if (this.transform3DSupport) this.accelerate(this.element);\n    var style = window.getComputedStyle(this.element);\n    if (style.getPropertyValue('position') === 'static') {\n      this.element.style.position = 'relative';\n    }\n\n    // Setup\n    this.updateLayers();\n    this.updateDimensions();\n    this.enable();\n    this.queueCalibration(this.calibrationDelay);\n  };\n\n  Parallax.prototype.updateLayers = function() {\n\n    // Cache Layer Elements\n    this.layers = this.element.getElementsByClassName('layer');\n    this.depths = [];\n\n    // Configure Layer Styles\n    for (var i = 0, l = this.layers.length; i < l; i++) {\n      var layer = this.layers[i];\n      if (this.transform3DSupport) this.accelerate(layer);\n      layer.style.position = i ? 'absolute' : 'relative';\n      layer.style.display = 'block';\n      layer.style.left = 0;\n      layer.style.top = 0;\n\n      // Cache Layer Depth\n      this.depths.push(this.data(layer, 'depth') || 0);\n    }\n  };\n\n  Parallax.prototype.updateDimensions = function() {\n    this.ww = window.innerWidth;\n    this.wh = window.innerHeight;\n    this.wcx = this.ww * this.originX;\n    this.wcy = this.wh * this.originY;\n    this.wrx = Math.max(this.wcx, this.ww - this.wcx);\n    this.wry = Math.max(this.wcy, this.wh - this.wcy);\n  };\n\n  Parallax.prototype.updateBounds = function() {\n    this.bounds = this.element.getBoundingClientRect();\n    this.ex = this.bounds.left;\n    this.ey = this.bounds.top;\n    this.ew = this.bounds.width;\n    this.eh = this.bounds.height;\n    this.ecx = this.ew * this.originX;\n    this.ecy = this.eh * this.originY;\n    this.erx = Math.max(this.ecx, this.ew - this.ecx);\n    this.ery = Math.max(this.ecy, this.eh - this.ecy);\n  };\n\n  Parallax.prototype.queueCalibration = function(delay) {\n    clearTimeout(this.calibrationTimer);\n    this.calibrationTimer = setTimeout(this.onCalibrationTimer, delay);\n  };\n\n  Parallax.prototype.enable = function() {\n    if (!this.enabled) {\n      this.enabled = true;\n      if (this.orientationSupport) {\n        this.portrait = null;\n        window.addEventListener('deviceorientation', this.onDeviceOrientation);\n        setTimeout(this.onOrientationTimer, this.supportDelay);\n      } else {\n        this.cx = 0;\n        this.cy = 0;\n        this.portrait = false;\n        window.addEventListener('mousemove', this.onMouseMove);\n      }\n      window.addEventListener('resize', this.onWindowResize);\n      this.raf = requestAnimationFrame(this.onAnimationFrame);\n    }\n  };\n\n  Parallax.prototype.disable = function() {\n    if (this.enabled) {\n      this.enabled = false;\n      if (this.orientationSupport) {\n        window.removeEventListener('deviceorientation', this.onDeviceOrientation);\n      } else {\n        window.removeEventListener('mousemove', this.onMouseMove);\n      }\n      window.removeEventListener('resize', this.onWindowResize);\n      cancelAnimationFrame(this.raf);\n    }\n  };\n\n  Parallax.prototype.calibrate = function(x, y) {\n    this.calibrateX = x === undefined ? this.calibrateX : x;\n    this.calibrateY = y === undefined ? this.calibrateY : y;\n  };\n\n  Parallax.prototype.invert = function(x, y) {\n    this.invertX = x === undefined ? this.invertX : x;\n    this.invertY = y === undefined ? this.invertY : y;\n  };\n\n  Parallax.prototype.friction = function(x, y) {\n    this.frictionX = x === undefined ? this.frictionX : x;\n    this.frictionY = y === undefined ? this.frictionY : y;\n  };\n\n  Parallax.prototype.scalar = function(x, y) {\n    this.scalarX = x === undefined ? this.scalarX : x;\n    this.scalarY = y === undefined ? this.scalarY : y;\n  };\n\n  Parallax.prototype.limit = function(x, y) {\n    this.limitX = x === undefined ? this.limitX : x;\n    this.limitY = y === undefined ? this.limitY : y;\n  };\n\n  Parallax.prototype.origin = function(x, y) {\n    this.originX = x === undefined ? this.originX : x;\n    this.originY = y === undefined ? this.originY : y;\n  };\n\n  Parallax.prototype.clamp = function(value, min, max) {\n    value = Math.max(value, min);\n    value = Math.min(value, max);\n    return value;\n  };\n\n  Parallax.prototype.css = function(element, property, value) {\n    var jsProperty = this.propertyCache[property];\n    if (!jsProperty) {\n      for (var i = 0, l = this.vendors.length; i < l; i++) {\n        if (this.vendors[i] !== null) {\n          jsProperty = this.camelCase(this.vendors[i][1] + '-' + property);\n        } else {\n          jsProperty = property;\n        }\n        if (element.style[jsProperty] !== undefined) {\n          this.propertyCache[property] = jsProperty;\n          break;\n        }\n      }\n    }\n    element.style[jsProperty] = value;\n  };\n\n  Parallax.prototype.accelerate = function(element) {\n    this.css(element, 'transform', 'translate3d(0,0,0)');\n    this.css(element, 'transform-style', 'preserve-3d');\n    this.css(element, 'backface-visibility', 'hidden');\n  };\n\n  Parallax.prototype.setPosition = function(element, x, y) {\n    x += 'px';\n    y += 'px';\n    if (this.transform3DSupport) {\n      this.css(element, 'transform', 'translate3d('+x+','+y+',0)');\n    } else if (this.transform2DSupport) {\n      this.css(element, 'transform', 'translate('+x+','+y+')');\n    } else {\n      element.style.left = x;\n      element.style.top = y;\n    }\n  };\n\n  Parallax.prototype.onOrientationTimer = function() {\n    if (this.orientationSupport && this.orientationStatus === 0) {\n      this.disable();\n      this.orientationSupport = false;\n      this.enable();\n    }\n  };\n\n  Parallax.prototype.onCalibrationTimer = function() {\n    this.calibrationFlag = true;\n  };\n\n  Parallax.prototype.onWindowResize = function() {\n    this.updateDimensions();\n  };\n\n  Parallax.prototype.onAnimationFrame = function() {\n    this.updateBounds();\n    var dx = this.ix - this.cx;\n    var dy = this.iy - this.cy;\n    if ((Math.abs(dx) > this.calibrationThreshold) || (Math.abs(dy) > this.calibrationThreshold)) {\n      this.queueCalibration(0);\n    }\n    if (this.portrait) {\n      this.mx = this.calibrateX ? dy : this.iy;\n      this.my = this.calibrateY ? dx : this.ix;\n    } else {\n      this.mx = this.calibrateX ? dx : this.ix;\n      this.my = this.calibrateY ? dy : this.iy;\n    }\n    this.mx *= this.ew * (this.scalarX / 100);\n    this.my *= this.eh * (this.scalarY / 100);\n    if (!isNaN(parseFloat(this.limitX))) {\n      this.mx = this.clamp(this.mx, -this.limitX, this.limitX);\n    }\n    if (!isNaN(parseFloat(this.limitY))) {\n      this.my = this.clamp(this.my, -this.limitY, this.limitY);\n    }\n    this.vx += (this.mx - this.vx) * this.frictionX;\n    this.vy += (this.my - this.vy) * this.frictionY;\n    for (var i = 0, l = this.layers.length; i < l; i++) {\n      var layer = this.layers[i];\n      var depth = this.depths[i];\n      var xOffset = this.vx * depth * (this.invertX ? -1 : 1);\n      var yOffset = this.vy * depth * (this.invertY ? -1 : 1);\n      this.setPosition(layer, xOffset, yOffset);\n    }\n    this.raf = requestAnimationFrame(this.onAnimationFrame);\n  };\n\n  Parallax.prototype.onDeviceOrientation = function(event) {\n\n    // Validate environment and event properties.\n    if (!this.desktop && event.beta !== null && event.gamma !== null) {\n\n      // Set orientation status.\n      this.orientationStatus = 1;\n\n      // Extract Rotation\n      var x = (event.beta  || 0) / MAGIC_NUMBER; //  -90 :: 90\n      var y = (event.gamma || 0) / MAGIC_NUMBER; // -180 :: 180\n\n      // Detect Orientation Change\n      var portrait = this.wh > this.ww;\n      if (this.portrait !== portrait) {\n        this.portrait = portrait;\n        this.calibrationFlag = true;\n      }\n\n      // Set Calibration\n      if (this.calibrationFlag) {\n        this.calibrationFlag = false;\n        this.cx = x;\n        this.cy = y;\n      }\n\n      // Set Input\n      this.ix = x;\n      this.iy = y;\n    }\n  };\n\n  Parallax.prototype.onMouseMove = function(event) {\n\n    // Cache mouse coordinates.\n    var clientX = event.clientX;\n    var clientY = event.clientY;\n\n    // Calculate Mouse Input\n    if (!this.orientationSupport && this.relativeInput) {\n\n      // Clip mouse coordinates inside element bounds.\n      if (this.clipRelativeInput) {\n        clientX = Math.max(clientX, this.ex);\n        clientX = Math.min(clientX, this.ex + this.ew);\n        clientY = Math.max(clientY, this.ey);\n        clientY = Math.min(clientY, this.ey + this.eh);\n      }\n\n      // Calculate input relative to the element.\n      this.ix = (clientX - this.ex - this.ecx) / this.erx;\n      this.iy = (clientY - this.ey - this.ecy) / this.ery;\n\n    } else {\n\n      // Calculate input relative to the window.\n      this.ix = (clientX - this.wcx) / this.wrx;\n      this.iy = (clientY - this.wcy) / this.wry;\n    }\n  };\n\n  // Expose Parallax\n  window[NAME] = Parallax;\n\n})(window, document);\n"],"sourceRoot":"/source/"}